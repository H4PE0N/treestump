
SOURCE_FOLDER := ../Source-Files-Folder
OBJECT_FOLDER := ../Object-Files-Folder
BINARY_FOLDER := ../Binary-Files-Folder

ENGINE_FOLDER := $(SOURCE_FOLDER)/Chess-Engine-Folder
MASTER_FOLDER := $(SOURCE_FOLDER)/Game-Master-Folder
SCREEN_FOLDER := $(SOURCE_FOLDER)/Game-Screen-Folder

ENGINE_SOURCE := $(ENGINE_FOLDER)/Source-Files-Folder
ENGINE_HEADER := $(ENGINE_FOLDER)/Header-Files-Folder

MASTER_SOURCE := $(MASTER_FOLDER)/Source-Files-Folder
MASTER_HEADER := $(MASTER_FOLDER)/Header-Files-Folder

SCREEN_SOURCE := $(SCREEN_FOLDER)/Source-Files-Folder
SCREEN_HEADER := $(SCREEN_FOLDER)/Header-Files-Folder

ENGINE_SOURCES := $(wildcard $(ENGINE_SOURCE)/*.c)
ENGINE_HEADERS := $(wildcard $(ENGINE_HEADER)/*.h)

SCREEN_SOURCES := $(wildcard $(SCREEN_SOURCE)/*.c)
SCREEN_HEADERS := $(wildcard $(SCREEN_HEADER)/*.h)


ENGINE_OBJECTS := $(patsubst $(ENGINE_SOURCE)/%.c, $(OBJECT_FOLDER)/%.o, $(ENGINE_SOURCES))
SCREEN_OBJECTS := $(patsubst $(SCREEN_SOURCE)/%.c, $(OBJECT_FOLDER)/%.o, $(SCREEN_SOURCES))

SOURCE_FILES := $(SCREEN_SOURCES) $(ENGINE_SOURCES)
HEADER_FILES := $(SCREEN_HEADERS) $(ENGINE_HEADERS)
OBJECT_FILES := $(SCREEN_OBJECTS) $(ENGINE_OBJECTS)


COMPILE_COMPILOR := gcc
COMPILE_FLAGS := -Wall -Werror

SDL_LIB_FLAGS := -lSDL2main -lSDL2 -lSDL2_image
SDL_DIR_FLAGS := -ISDL2/include -LSDL2/lib

# This is the compile flags needed for Windows:
WIN_SDL_FLAGS := $(SDL_DIR_FLAGS) -lmingw32 $(SDL_LIB_FLAGS)

# This is the compile flags needed for MacOS:
MAC_SDL_FLAGS := `sdl2-config --libs --cflags` $(SDL_LIB_FLAGS)

SDL_EXECUTE_FLAGS := $(WIN_SDL_FLAGS) -lm

STD_EXECUTE_FLAGS := -lm


.PRECIOUS: $(OBJECT_FILES)


default:
	@echo $(ENGINE_SOURCE)

SDL_PROGRAMS :=
STD_PROGRAMS := program

$(SDL_PROGRAMS): %: $(OBJECT_FOLDER)/%.o $(OBJECT_FILES) $(MASTER_SOURCE)/%.c $(MASTER_HEADER)/%.h $(SOURCE_FILES) $(HEADER_FILES)
	$(COMPILE_COMPILOR) $(OBJECT_FILES) $(OBJECT_FOLDER)/$@.o $(COMPILE_FLAGS) $(SDL_EXECUTE_FLAGS) -o $@

$(STD_PROGRAMS): %: $(OBJECT_FOLDER)/%.o $(ENGINE_OBJECTS) $(MASTER_SOURCE)/%.c $(MASTER_HEADER)/%.h $(ENGINE_SOURCES) $(ENGINE_HEADERS)
	$(COMPILE_COMPILOR) $(ENGINE_OBJECTS) $(OBJECT_FOLDER)/$@.o $(COMPILE_FLAGS) $(STD_EXECUTE_FLAGS) -o $@


$(OBJECT_FOLDER)/%.o: $(ENGINE_SOURCE)/%.c $(ENGINE_HEADER)/%.h
	$(COMPILE_COMPILOR) $< -c $(COMPILE_FLAGS) -o $@

$(OBJECT_FOLDER)/%.o: $(SCREEN_SOURCE)/%.c $(SCREEN_HEADER)/%.h
	$(COMPILE_COMPILOR) $< -c $(COMPILE_FLAGS) -o $@

$(OBJECT_FOLDER)/%.o: $(MASTER_SOURCE)/%.c $(MASTER_HEADER)/%.h
	$(COMPILE_COMPILOR) $< -c $(COMPILE_FLAGS) -o $@
